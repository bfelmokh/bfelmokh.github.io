<html>
<head>
<title> Planner </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript">
        $(document).ready(function() {
            var arr = new Array();
            $("select[multiple]").change(function() {
                $(this).find("option:selected")
				if (this.name.substr(0,1)== "W" || this.name.substr(0,1)== "N"){
					limit=1;
				}
				else{
					limit=2;
				}
                if ($(this).find("option:selected").length > limit) {
                    $(this).find("option").removeAttr("selected");
                    $(this).val(arr);
                }
                else {
                    arr = new Array();
                    $(this).find("option:selected").each(function(index, item) {
                        arr.push($(item).val());
                    });
                }
            });
        });
    </script>
<style>
.table td {
		text-align:center;
		vertical-align:middle;
	}
.table-striped>tbody>tr:nth-child(odd)>td, 
.table-striped>tbody>tr:nth-child(odd)>th {
   background-color:  #C50414;
   color:white}
</style>
</head>
<body>
<center><h1>Planner</h1></center>
<div class="table-responsive-lg">
	<table class="table">
		<tr>
		<th>Shifts</th>
			<th>Mon 01 Jun 2020</th><th>Tue 02 Jun 2020</th><th>Wed 03 Jun 2020</th><th>Thu 04 Jun 2020</th><th>Fri 05 Jun 2020</th><th>Sat 06 Jun 2020</th><th>Sun 07 Jun 2020</th>	
		</tr>
		<tr>
			<th>Early <br/><span class="badge badge-pill badge-warning">DPM</span></th>
			<td> <select name="E0" id="E0" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='badge-warning' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='badge-warning' value=EMP6>EMP6</option><option class='badge-warning' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='badge-warning' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="E1" id="E1" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='badge-warning' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='badge-warning' value=EMP6>EMP6</option><option class='badge-warning' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='badge-warning' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="E2" id="E2" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='badge-warning' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='badge-warning' value=EMP6>EMP6</option><option class='badge-warning' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='badge-warning' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="E3" id="E3" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='badge-warning' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='badge-warning' value=EMP6>EMP6</option><option class='badge-warning' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='badge-warning' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="E4" id="E4" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='badge-warning' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='badge-warning' value=EMP6>EMP6</option><option class='badge-warning' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='badge-warning' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td rowspan='0'><select name="W5" id="W5" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td rowspan='0'> <select name="W6" id="W6" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td>			
		</tr>
		<tr>
			<th>Late</th>
			<td> <select name="L0" id="L0" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="L1" id="L1" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="L2" id="L2" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="L3" id="L3" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="L4" id="L4" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td>	
		</tr>
		<tr>
			<th>Night</th>
			<td> <select name="N0" id="N0" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="N1" id="N1" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="N2" id="N2" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="N3" id="N3" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td><td> <select name="N4" id="N4" class="custom-select" multiple >
<option class='' value=EMP1>EMP1</option><option class='' value=EMP2>EMP2</option><option class='' value=EMP3>EMP3</option><option class='' value=EMP4>EMP4</option><option class='' value=EMP5>EMP5</option><option class='' value=EMP6>EMP6</option><option class='' value=EMP7>EMP7</option><option class='' value=EMP8>EMP8</option><option class='' value=EMP9>EMP9</option><option class='' value=EMP10>EMP10</option><option class='' value=EMP11>EMP11</option><option class='' value=EMP12>EMP12</option><option class='' value=EMP13>EMP13</option><option class='' value=EMP14>EMP14</option></select></td>	
		</tr>
		
		
</table>
</div>
<center>  <h1 class="final"> FINAL </h1><span class="badge badge-pill badge-success">Hover FINAL to update Plan views</span></center>
<div class="table-responsive-lg">
	<table class="table table-bordered table-striped">
			<tr>
		<th>Shifts</th>
			<th>Mon 01 Jun 2020</th><th>Tue 02 Jun 2020</th><th>Wed 03 Jun 2020</th><th>Thu 04 Jun 2020</th><th>Fri 05 Jun 2020</th><th>Sat 06 Jun 2020</th><th>Sun 07 Jun 2020</th>	
		</tr>
		<tr>
			<th>Early <br/><span class="badge badge-pill badge-warning">DPM</span></th>
			<td> <div name="RE0" id="RE0" class="div" >
</div></td><td> <div name="RE1" id="RE1" class="div" >
</div></td><td> <div name="RE2" id="RE2" class="div" >
</div></td><td> <div name="RE3" id="RE3" class="div" >
</div></td><td> <div name="RE4" id="RE4" class="div" >
</div></td>			<td rowspan='0'> <div name="RW5" id="RW5" class="div" >
</div></td><td rowspan='0'> <div name="RW6" id="RW6" class="div" >
</div></td>			
		</tr>
		<tr>
			<th>Late</th>
			<td> <div name="RL0" id="RL0" class="div" >
</div></td><td> <div name="RL1" id="RL1" class="div" >
</div></td><td> <div name="RL2" id="RL2" class="div" >
</div></td><td> <div name="RL3" id="RL3" class="div" >
</div></td><td> <div name="RL4" id="RL4" class="div" >
</div></td>	
		</tr>
		<tr>
			<th>Night</th>
			<td> <div name="RN0" id="RN0" class="div" >
</div></td><td> <div name="RN1" id="RN1" class="div" >
</div></td><td> <div name="RN2" id="RN2" class="div" >
</div></td><td> <div name="RN3" id="RN3" class="div" >
</div></td><td> <div name="RN4" id="RN4" class="div" >
</div></td>	
		</tr>
	</table>
<div>



<script>
function updateFromWeekEnd(selectedSupervisor,day){
			resultID="#RW"+day
			$(resultID).text(selectedSupervisor);
}
function updateFromEarly(selectedSupervisor,day){
			sup1="#L"+day+" option[value='"+selectedSupervisor[0]+"']";
			sup2="#L"+day+" option[value='"+selectedSupervisor[1]+"']";
			$(sup1).remove();
			$(sup2).remove();
			sup1="#N"+day+" option[value='"+selectedSupervisor[0]+"']";
			sup2="#N"+day+" option[value='"+selectedSupervisor[1]+"']";
			$(sup1).remove();
			$(sup2).remove();
			resultID="#RE"+day
			$(resultID).text(selectedSupervisor);
}
function updateFromLate(selectedSupervisor,day){
			sup1="#E"+day+" option[value='"+selectedSupervisor[0]+"']";
			sup2="#E"+day+" option[value='"+selectedSupervisor[1]+"']";
			$(sup1).remove();
			$(sup2).remove();
			sup1="#N"+day+" option[value='"+selectedSupervisor[0]+"']";
			sup2="#N"+day+" option[value='"+selectedSupervisor[1]+"']";
			$(sup1).remove();
			$(sup2).remove();
			resultID="#RL"+day
			$(resultID).text(selectedSupervisor);
}
function updateFromNight(selectedSupervisor,day){
			sup1="#E"+day+" option[value='"+selectedSupervisor[0]+"']";
			sup2="#L"+day+" option[value='"+selectedSupervisor[0]+"']";
			$(sup1).remove();
			$(sup2).remove();
if ( day == 4 ) {			
			sup1="#W5 option[value='"+selectedSupervisor[0]+"']";
			$(sup1).remove();
			sup1="#W6 option[value='"+selectedSupervisor[0]+"']";
			$(sup1).remove();
}
			resultID="#RN"+day
			$(resultID).text(selectedSupervisor);
}
function validEarly(){
	dpm=["Elmokhtar","Wissem","chroudi","Amir"];
	valid=true;
	vvdpm=true;
	for (i=0;i<5;i++){
		vdpm=false;
		sup = "#E"+i;
		limit = $(sup).find("option:selected").length;
		 if (limit != 2){
			valid=false;
		}else{
				// Check DPM
			for (d=0;d<4;d++){
				if(! (($(sup).children("option:selected").toArray().map(item => item.value)[0]!=dpm[d]) && ($(sup).children("option:selected").toArray().map(item => item.value)[1]!=dpm[d]))){
					vdpm=true;
				}
			}
		}
		if (vdpm=false) {
			vvdpm=false;
		}
	}
	for (j=0;j<5;j++){
			sup1="#L"+j;
			sup2="#N"+j;
			if ((valid == true) && (vvdpm == true)){
				$(sup1).attr("disabled",false);
			}else{
				$(sup1).attr("disabled",true);
				$(sup2).attr("disabled",true);
			}
		} 
}
function validLate(){
	valid=true;
	for (i=0;i<5;i++){
		sup = "#L"+i;
		limit = $(sup).find("option:selected").length;
		 if (limit != 2){
			valid=false;
		}
	}
	for (j=0;j<5;j++){
			sup2="#N"+j;
			if (valid == true){
				$(sup2).attr("disabled",false);
			}else{
				$(sup2).attr("disabled",true);
			}
		} 
}
$('body').ready(function(){
		validEarly();
});
</script>
<script >
	$('select').on('mouseleave', function() {
		var shift = this.name.substr(0,1);
		var day = this.name.substr(1,1);
		if ( shift == 'E' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateFromEarly(selectedSupervisor,day);
			validEarly();
		}
		else if ( shift == 'L' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateFromLate(selectedSupervisor,day);
			validLate();
		}
		else if ( shift == 'N' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateFromNight(selectedSupervisor,day)
		}else if ( shift == 'W' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateFromWeekEnd(selectedSupervisor,day)
		}
	});
	$('select').on('mouseover', function() {
		var shift = this.name.substr(0,1);
		var day = this.name.substr(1,1);
		if ( shift == 'E' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateEarly(selectedSupervisor,day);
		}
		else if ( shift == 'L' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateLate(selectedSupervisor,day);
		}
		else if ( shift == 'N' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			updateNight(selectedSupervisor,day)
		}else if ( shift == 'W' ) {
			var selectedSupervisor = $(this).children("option:selected").toArray().map(item => item.value);
			//updateWeekEnd(selectedSupervisor,day)
		}
	});
	
	$('.final').on('mouseover', function() {
			tab=[];
			shiftsnames=["E","L","N"];
			colsp=[];
			for (s=0;s<3;s++ ){
			colsplength=1;
			lastcolsp=0;
			indicecolsp=0;
				for (i=0;i<5;i++){
					RWID="#R"+shiftsnames[s]+i;
					tab[i] = $(RWID).text();
					if (i>0){
						if (tab[lastcolsp]==tab[i]){
							colsplength++;
							$(RWID).parent().hide();
							RWIDTMP="#R"+shiftsnames[s]+lastcolsp;
							$(RWIDTMP).parent().attr("colspan",colsplength);
						}else{
							$(RWID).parent().show();
							indicecolsp++;
							lastcolsp=i;
							colsplength=1;
						}
					}else{
							RWIDTMP="#R"+shiftsnames[s]+lastcolsp;
							$(RWIDTMP).parent().attr("colspan",colsplength);
					}
					
				}
			}
		RWID="#RW6";
		RWIDTMP="#RW5";
		if ( $(RWID).text() == $(RWIDTMP).text() ){
			$(RWID).parent().hide();
			$(RWIDTMP).parent().attr("colspan",2);
		} else{
			$(RWID).parent().show();
			$(RWIDTMP).parent().attr("colspan",1);
		}
		
		
	});
</script>
</body>
</html>
